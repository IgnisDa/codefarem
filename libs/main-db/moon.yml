type: 'library'
language: 'typescript'

fileGroups:
  dbschema:
    - 'dbschema/**/*.esdl'

tasks:
  test:
    options:
      runInCI: false

  # FIXME: Move this task to the generated project
  generate:
    command:
      - edgeql-js
    args:
      - '--output-dir'
      - '../generated/src/edgeql-js'
    inputs:
      - '@group(dbschema)'
    # outputs:
    #   - '../generated/src/edgeql-js'
    local: true

  lint-edgeql:
    command: 'noop'
    inputs:
      - '@group(dbschema)'
      - 'edgeql/**/*.edgeql'

  lint:
    deps:
      - '~:lint-edgeql'
      - '~:lint-js'
    command: 'noop'

workspace:
  inheritedTasks:
    exclude:
      - 'build'
    rename:
      lint: 'lint-js'
