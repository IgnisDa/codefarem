type: 'library'

fileGroups:
  dbschema:
    - 'dbschema/**/*.esdl'

tasks:
  generate:
    command:
      - edgeql-js
    inputs:
      - '@group(dbschema)'
    outputs:
      - 'dbschema/edgeql-js'
    local: true

  lint-edgeql:
    command:
      - 'echo'
      - 'linting'
      - 'EdgeQL...'
    inputs:
      - '@group(dbschema)'
      - 'edgeql/**/*.edgeql'
  lint:
    deps:
      - '~:lint-edgeql'
      - '~:lint-js'
    command: 'echo done'

workspace:
  inheritedTasks:
    rename:
      lint: 'lint-js'
