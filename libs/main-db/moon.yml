type: 'library'

fileGroups:
  dbschema:
    - 'dbschema/**/*.esdl'

tasks:
  generate:
    command:
      - edgeql-js
    inputs:
      - '@group(dbschema)'
    outputs:
      - 'dbschema/edgeql-js'

  lint-edgeql:
    command: 'noop'
    inputs:
      - '@group(dbschema)'
      - 'edgeql/**/*.edgeql'

  lint:
    deps:
      - '~:lint-edgeql'
      - '~:lint-js'
    command: 'noop'

  test:
    deps:
      - '~:generate'

workspace:
  inheritedTasks:
    rename:
      lint: 'lint-js'
