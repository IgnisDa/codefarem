type: 'library'
language: 'typescript'

fileGroups:
  dbschema:
    - 'dbschema/**/*.esdl'

tasks:
  generate:
    command:
      - edgeql-js
    inputs:
      - '@group(dbschema)'
    outputs:
      - 'dbschema/edgeql-js'
    local: true

  lint-edgeql:
    command: 'noop'
    inputs:
      - '@group(dbschema)'
      - 'edgeql/**/*.edgeql'

  lint:
    deps:
      - '~:lint-edgeql'
      - '~:lint-js'
    command: 'noop'

workspace:
  inheritedTasks:
    exclude:
      - 'build'
    rename:
      lint: 'lint-js'
