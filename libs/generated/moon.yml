type: 'library'

tasks:
  generate-orchestrator-graphql:
    local: true
    command:
      - 'ts-node'
      - 'src/generate-graphql.ts'
      - 'http://127.0.0.1:8000/graphql'
      - 'orchestrator'
    outputs:
      - 'src/graphql/orchestrator.ts'

  generate-graphql:
    local: true
    deps:
      - '~:generate-orchestrator-graphql'

  build:
    command: 'swc'
    args:
      - 'src'
      - '--out-dir'
      - 'dist'
      - '--sync'
    outputs:
      - 'dist'

workspace:
  inheritedTasks:
    exclude:
      - 'lint' # generated files do not need to be linted
      - 'test'
