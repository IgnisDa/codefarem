type: 'library'

tasks:
  generate-orchestrator-graphql:
    command:
      - 'graphql-codegen'
      - '--config'
      - 'src/graphql/orchestrator/codegen.ts'
    outputs:
      - 'src/graphql/orchestrator-generated'
    local: true

  generate-graphql:
    deps:
      - '~:generate-orchestrator-graphql'
    local: true

  build:
    command: 'swc'
    args:
      - 'src'
      - '--out-dir'
      - 'dist'
      - '--sync'
    outputs:
      - 'dist'

workspace:
  inheritedTasks:
    exclude:
      - 'build'
      - 'lint' # generated files do not need to be linted
      - 'test'
